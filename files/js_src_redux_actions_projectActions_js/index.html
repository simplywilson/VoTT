<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Plato - js-src/redux/actions/projectActions.js</title>

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="author" content="">

  <!--[if lt IE 9]>
  <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->

  <link href="../../assets/css/vendor/morris.css" rel="stylesheet">
  <link href="../../assets/css/vendor/bootstrap.css" rel="stylesheet">
  <link href="../../assets/css/vendor/font-awesome.css" rel="stylesheet">
  <link href="../../assets/css/vendor/codemirror.css" rel="stylesheet">
  <link href="../../assets/css/plato.css" rel="stylesheet">
  <link href="../../assets/css/plato-file.css" rel="stylesheet">

</head>

<body>

<div class="navbar navbar-fixed-top">
  <div class="container">
    <a class="navbar-brand" href="http://github.com/es-analysis/plato">Plato on Github</a>
    <ul class="nav navbar-nav">
      <li>
        <a href="../../index.html">Report Home</a>
      </li>
    </ul>
  </div>
</div>

<div class="jumbotron">
  <div class="container">
    <h1>js-src/redux/actions/projectActions.js</h1>
  </div>
</div>

<div class="container aggregate-stats">
  <div class="row">
    <div class="col-md-6">
      <h2 class="header">Maintainability <a href="http://blogs.msdn.com/b/codeanalysis/archive/2007/11/20/maintainability-index-range-and-meaning.aspx"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="A value between 0 and 100 that represents the relative ease of maintaining the code. A high value means better maintainability." data-original-title="Maintainability Index"  data-container="body"></i></a></h2>
      <p class="stat">80.41</p>
    </div>
    <div class="col-md-6">
      <h2 class="header">Lines of code <i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Source Lines of Code / Logical Lines of Code" data-original-title="SLOC/LSLOC" data-container="body"></i></h2>
      <p class="stat">160</p>
    </div>
  </div>
  <div class="row historical">
    <div class="col-md-6">
      <p id="chart_historical_maint" class="chart"></p>
    </div>
    <div class="col-md-6">
      <p id="chart_historical_sloc" class="chart"></p>
    </div>
  </div>
  <div class="row">
    <div class="col-md-6">
      <h2 class="header">Difficulty  <a href="http://en.wikipedia.org/wiki/Halstead_complexity_measures"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="The difficulty measure is related to the difficulty of the program to write or understand." data-original-title="Difficulty" data-container="body"></i></a></h2>
      <p class="stat">41.69</p>
    </div>
    <div class="col-md-6">
      <h2 class="header">Estimated Errors  <a href="http://en.wikipedia.org/wiki/Halstead_complexity_measures"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Halstead's delivered bugs is an estimate for the number of errors in the implementation." data-original-title="Delivered Bugs" data-container="body"></i></a></h2>
      <p class="stat">1.49</p>
    </div>
  </div>
</div>

<div class="container charts">
  <div class="row">
    <h2 class="header">Function weight</h2>
  </div>
  <div class="row">
    <div class="col-md-6">
      <h3 class="chart-header">By Complexity <a href="http://en.wikipedia.org/wiki/Cyclomatic_complexity"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="This metric counts the number of distinct paths through a block of code. Lower values are better." data-original-title="Cyclomatic Complexity" data-container="body"></i></a></h3>
      <div id="fn-by-complexity" class="stat"></div>
    </div>
    <div class="col-md-6">
      <h3 class="chart-header">By SLOC  <i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Source Lines of Code / Logical Lines of Code" data-original-title="SLOC/LSLOC" data-container="body"></i></h3>
      <div id="fn-by-sloc" class="stat"></div>
    </div>
  </div>
</div>

<div class="container">
  <div class="row">
    <textarea id="file-source" class="col-md-12">var __awaiter = (this &amp;&amp; this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator[&quot;throw&quot;](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
import ProjectService from &quot;../../services/projectService&quot;;
import { ActionTypes } from &quot;./actionTypes&quot;;
import { AssetService } from &quot;../../services/assetService&quot;;
import { ExportProviderFactory } from &quot;../../providers/export/exportProviderFactory&quot;;
import { ErrorCode, AppError, } from &quot;../../models/applicationState&quot;;
import { createPayloadAction, createAction } from &quot;./actionCreators&quot;;
/**
 * Dispatches Load Project action and resolves with IProject
 * @param project - Project to load
 */
export function loadProject(project) {
    return (dispatch, getState) =&gt; __awaiter(this, void 0, void 0, function* () {
        const appState = getState();
        const projectService = new ProjectService();
        // Lookup security token used to decrypt project settings
        const securityToken = appState.appSettings.securityTokens
            .find((st) =&gt; st.name === project.securityToken);
        if (!securityToken) {
            throw new AppError(ErrorCode.SecurityTokenNotFound, &quot;Security Token Not Found&quot;);
        }
        const loadedProject = yield projectService.load(project, securityToken);
        dispatch(loadProjectAction(loadedProject));
        return loadedProject;
    });
}
/**
 * Dispatches Save Project action and resolves with IProject
 * @param project - Project to save
 */
export function saveProject(project) {
    return (dispatch, getState) =&gt; __awaiter(this, void 0, void 0, function* () {
        const appState = getState();
        const projectService = new ProjectService();
        if (projectService.isDuplicate(project, appState.recentProjects)) {
            throw new Error(`Project with name &#039;${project.name}
                already exists with the same target connection &#039;${project.targetConnection.name}&#039;`);
        }
        const securityToken = appState.appSettings.securityTokens
            .find((st) =&gt; st.name === project.securityToken);
        if (!securityToken) {
            throw new AppError(ErrorCode.SecurityTokenNotFound, &quot;Security Token Not Found&quot;);
        }
        const savedProject = yield projectService.save(project, securityToken);
        dispatch(saveProjectAction(savedProject));
        // Reload project after save actions
        yield loadProject(savedProject)(dispatch, getState);
        return savedProject;
    });
}
/**
 * Dispatches Delete Project action and resolves with project
 * @param project - Project to delete
 */
export function deleteProject(project) {
    return (dispatch) =&gt; __awaiter(this, void 0, void 0, function* () {
        const projectService = new ProjectService();
        yield projectService.delete(project);
        dispatch(deleteProjectAction(project));
    });
}
/**
 * Dispatches Close Project action
 */
export function closeProject() {
    return (dispatch) =&gt; {
        dispatch({ type: ActionTypes.CLOSE_PROJECT_SUCCESS });
    };
}
/**
 * Gets assets from project, dispatches load assets action and returns assets
 * @param project - Project from which to load assets
 */
export function loadAssets(project) {
    return (dispatch) =&gt; __awaiter(this, void 0, void 0, function* () {
        const assetService = new AssetService(project);
        const assets = yield assetService.getAssets();
        dispatch(loadProjectAssetsAction(assets));
        return assets;
    });
}
/**
 * Load metadata from asset within project
 * @param project - Project from which to load asset metadata
 * @param asset - Asset from which to load metadata
 */
export function loadAssetMetadata(project, asset) {
    return (dispatch) =&gt; __awaiter(this, void 0, void 0, function* () {
        const assetService = new AssetService(project);
        const assetMetadata = yield assetService.getAssetMetadata(asset);
        dispatch(loadAssetMetadataAction(assetMetadata));
        return Object.assign({}, assetMetadata);
    });
}
/**
 * Save metadata from asset within project
 * @param project - Project from which to save asset metadata
 * @param assetMetadata - Metadata for asset within project
 */
export function saveAssetMetadata(project, assetMetadata) {
    return (dispatch) =&gt; __awaiter(this, void 0, void 0, function* () {
        const assetService = new AssetService(project);
        const savedMetadata = yield assetService.save(assetMetadata);
        dispatch(saveAssetMetadataAction(savedMetadata));
        return Object.assign({}, savedMetadata);
    });
}
/**
 * Initialize export provider, get export data and dispatch export project action
 * @param project - Project to export
 */
export function exportProject(project) {
    return (dispatch) =&gt; __awaiter(this, void 0, void 0, function* () {
        if (project.exportFormat &amp;&amp; project.exportFormat.providerType) {
            const exportProvider = ExportProviderFactory.create(project.exportFormat.providerType, project, project.exportFormat.providerOptions);
            const results = yield exportProvider.export();
            dispatch(exportProjectAction(project));
            return results;
        }
    });
}
/**
 * Instance of Load Project action
 */
export const loadProjectAction = createPayloadAction(ActionTypes.LOAD_PROJECT_SUCCESS);
/**
 * Instance of Close Project action
 */
export const closeProjectAction = createAction(ActionTypes.CLOSE_PROJECT_SUCCESS);
/**
 * Instance of Save Project action
 */
export const saveProjectAction = createPayloadAction(ActionTypes.SAVE_PROJECT_SUCCESS);
/**
 * Instance of Delete Project action
 */
export const deleteProjectAction = createPayloadAction(ActionTypes.DELETE_PROJECT_SUCCESS);
/**
 * Instance of Load Project Assets action
 */
export const loadProjectAssetsAction = createPayloadAction(ActionTypes.LOAD_PROJECT_ASSETS_SUCCESS);
/**
 * Instance of Load Asset Metadata action
 */
export const loadAssetMetadataAction = createPayloadAction(ActionTypes.LOAD_ASSET_METADATA_SUCCESS);
/**
 * Instance of Save Asset Metadata action
 */
export const saveAssetMetadataAction = createPayloadAction(ActionTypes.SAVE_ASSET_METADATA_SUCCESS);
/**
 * Instance of Export Project action
 */
export const exportProjectAction = createPayloadAction(ActionTypes.EXPORT_PROJECT_SUCCESS);</textarea>
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p>.</p>
  </div>
</footer>

<script type="text/html" id="complexity-popover-template">
  <div class="complexity-notice">
    Complexity : {{ cyclomatic }} <br>
    Length : {{ halstead.length }} <br>
    Difficulty : {{ halstead.difficulty.toFixed(2) }} <br>
    Est # bugs : {{ halstead.bugs.toFixed(2) }}<br>
  </div>
</script>

<script type="text/javascript" src="../../assets/scripts/bundles/core-bundle.js"></script>
<script type="text/javascript" src="../../assets/scripts/bundles/codemirror.js"></script>
<script type="text/javascript" src="../../assets/scripts/codemirror.markpopovertext.js"></script>
<script type="text/javascript" src="report.js"></script>
<script type="text/javascript" src="report.history.js"></script>
<script type="text/javascript" src="../../assets/scripts/plato-file.js"></script>
</body>
</html>
